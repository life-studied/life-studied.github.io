<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>09 高级绘制 | Yunyin&#39;s blog</title>
  
    <link rel="icon" href="/assert/C++.jpg">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/background.jpg)">
        <div class='av-pic' style="background-image: url(/assets/C++.jpg)">
        </div>
    </section>
    <section class='menu'>
        <div>Yunyin&#39;s blog</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/categories/" class="Btn">
              <li>Categories</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>09 高级绘制</h1>
    </header>

    <section>
      <h1>09 高级绘制</h1>
<h2 id="choosing-box（选中框）">choosing box（选中框）</h2>
<span id="more"></span>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ImVec2 start&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">ImVec2 end&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">bool</span> isMouseRelease = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// into loop</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">				<span class="keyword">if</span> (isMouseRelease)</span><br><span class="line">					<span class="keyword">if</span> (ImGui::<span class="built_in">IsMouseDown</span>(<span class="number">0</span>) &amp;&amp; <span class="built_in">IsWindowFocused</span>())	<span class="comment">// record start pos</span></span><br><span class="line">					&#123;</span><br><span class="line">						isMouseRelease = <span class="literal">false</span>;</span><br><span class="line">						start = ImGui::<span class="built_in">GetMousePos</span>();</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (ImGui::<span class="built_in">IsMouseDown</span>(<span class="number">0</span>) &amp;&amp; <span class="built_in">IsWindowFocused</span>())		</span><br><span class="line">				&#123;</span><br><span class="line">					end = ImGui::<span class="built_in">GetMousePos</span>();		<span class="comment">// record end pos</span></span><br><span class="line">					<span class="keyword">auto</span> leftup = ImGui::<span class="built_in">GetWindowPos</span>();	<span class="comment">// avoid out of window range</span></span><br><span class="line">					<span class="keyword">auto</span> size = ImGui::<span class="built_in">GetWindowSize</span>();</span><br><span class="line">					<span class="keyword">if</span> (end.x &gt; leftup.x + size.x)end.x = leftup.x + size.x;</span><br><span class="line">					<span class="keyword">if</span> (end.x &lt; leftup.x)end.x = leftup.x;</span><br><span class="line">					<span class="keyword">if</span> (end.y &gt; leftup.y + size.y)end.y = leftup.y + size.y;</span><br><span class="line">					<span class="keyword">if</span> (end.x &lt; leftup.y)end.y = leftup.y;</span><br><span class="line">					ImVec2 startR&#123;start&#125;, endR&#123;end&#125;;	<span class="comment">// set leftTop and rightDown Point</span></span><br><span class="line">					<span class="keyword">if</span> (start.x &gt; end.x) &#123; startR.x = end.x; endR.x = start.x; &#125;</span><br><span class="line">					<span class="keyword">if</span> (start.y &gt; end.y) &#123; startR.y = end.y; endR.y = start.y; &#125;</span><br><span class="line">					ImDrawList* drawList = ImGui::<span class="built_in">GetForegroundDrawList</span>();</span><br><span class="line">					drawList-&gt;<span class="built_in">AddRectFilled</span>(startR, endR, <span class="built_in">ImColor</span>(<span class="number">224</span>, <span class="number">247</span>, <span class="number">224</span>),<span class="number">5</span>,ImDrawFlags_::ImDrawFlags_RoundCornersAll);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (ImGui::<span class="built_in">IsMouseReleased</span>(<span class="number">0</span>))</span><br><span class="line">				&#123;</span><br><span class="line">					isMouseRelease = <span class="literal">true</span>;</span><br><span class="line">				&#125;</span><br></pre></td></tr></table></figure>
<h2 id="loading-bar（加载条）">loading bar（加载条）</h2>
<p>​	<a target="_blank" rel="noopener" href="https://github.com/ocornut/imgui/issues/1901">Progress Indicators (spinner + loading bar) · Issue #1901 · ocornut/imgui (github.com)</a></p>
<h3 id="1号">1号</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> ImGui &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">BufferingBar</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* label, <span class="type">float</span> value,  <span class="type">const</span> ImVec2&amp; size_arg, <span class="type">const</span> ImU32&amp; bg_col, <span class="type">const</span> ImU32&amp; fg_col)</span> </span>&#123;</span><br><span class="line">        ImGuiWindow* window = <span class="built_in">GetCurrentWindow</span>();</span><br><span class="line">        <span class="keyword">if</span> (window-&gt;SkipItems)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        ImGuiContext&amp; g = *GImGui;</span><br><span class="line">        <span class="type">const</span> ImGuiStyle&amp; style = g.Style;</span><br><span class="line">        <span class="type">const</span> ImGuiID id = window-&gt;<span class="built_in">GetID</span>(label);</span><br><span class="line"></span><br><span class="line">        ImVec2 pos = window-&gt;DC.CursorPos;</span><br><span class="line">        ImVec2 size = size_arg;</span><br><span class="line">        size.x -= style.FramePadding.x * <span class="number">2</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">const</span> ImRect <span class="title">bb</span><span class="params">(pos, ImVec2(pos.x + size.x, pos.y + size.y))</span></span>;</span><br><span class="line">        <span class="built_in">ItemSize</span>(bb, style.FramePadding.y);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">ItemAdd</span>(bb, id))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Render</span></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> circleStart = size.x * <span class="number">0.7f</span>;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> circleEnd = size.x;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> circleWidth = circleEnd - circleStart;</span><br><span class="line">        </span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">AddRectFilled</span>(bb.Min, <span class="built_in">ImVec2</span>(pos.x + circleStart, bb.Max.y), bg_col);</span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">AddRectFilled</span>(bb.Min, <span class="built_in">ImVec2</span>(pos.x + circleStart*value, bb.Max.y), fg_col);</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> t = g.Time;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> r = size.y / <span class="number">2</span>;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> speed = <span class="number">1.5f</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> a = speed*<span class="number">0</span>;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> b = speed*<span class="number">0.333f</span>;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> c = speed*<span class="number">0.666f</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> o1 = (circleWidth+r) * (t+a - speed * (<span class="type">int</span>)((t+a) / speed)) / speed;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> o2 = (circleWidth+r) * (t+b - speed * (<span class="type">int</span>)((t+b) / speed)) / speed;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> o3 = (circleWidth+r) * (t+c - speed * (<span class="type">int</span>)((t+c) / speed)) / speed;</span><br><span class="line">        </span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">AddCircleFilled</span>(<span class="built_in">ImVec2</span>(pos.x + circleEnd - o1, bb.Min.y + r), r, bg_col);</span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">AddCircleFilled</span>(<span class="built_in">ImVec2</span>(pos.x + circleEnd - o2, bb.Min.y + r), r, bg_col);</span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">AddCircleFilled</span>(<span class="built_in">ImVec2</span>(pos.x + circleEnd - o3, bb.Min.y + r), r, bg_col);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Spinner</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* label, <span class="type">float</span> radius, <span class="type">int</span> thickness, <span class="type">const</span> ImU32&amp; color)</span> </span>&#123;</span><br><span class="line">        ImGuiWindow* window = <span class="built_in">GetCurrentWindow</span>();</span><br><span class="line">        <span class="keyword">if</span> (window-&gt;SkipItems)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        ImGuiContext&amp; g = *GImGui;</span><br><span class="line">        <span class="type">const</span> ImGuiStyle&amp; style = g.Style;</span><br><span class="line">        <span class="type">const</span> ImGuiID id = window-&gt;<span class="built_in">GetID</span>(label);</span><br><span class="line">        </span><br><span class="line">        ImVec2 pos = window-&gt;DC.CursorPos;</span><br><span class="line">        <span class="function">ImVec2 <span class="title">size</span><span class="params">((radius )*<span class="number">2</span>, (radius + style.FramePadding.y)*<span class="number">2</span>)</span></span>;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">const</span> ImRect <span class="title">bb</span><span class="params">(pos, ImVec2(pos.x + size.x, pos.y + size.y))</span></span>;</span><br><span class="line">        <span class="built_in">ItemSize</span>(bb, style.FramePadding.y);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">ItemAdd</span>(bb, id))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Render</span></span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">PathClear</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> num_segments = <span class="number">30</span>;</span><br><span class="line">        <span class="type">int</span> start = <span class="built_in">abs</span>(<span class="built_in">ImSin</span>(g.Time*<span class="number">1.8f</span>)*(num_segments<span class="number">-5</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> a_min = IM_PI*<span class="number">2.0f</span> * ((<span class="type">float</span>)start) / (<span class="type">float</span>)num_segments;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> a_max = IM_PI*<span class="number">2.0f</span> * ((<span class="type">float</span>)num_segments<span class="number">-3</span>) / (<span class="type">float</span>)num_segments;</span><br><span class="line"></span><br><span class="line">        <span class="type">const</span> ImVec2 centre = <span class="built_in">ImVec2</span>(pos.x+radius, pos.y+radius+style.FramePadding.y);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num_segments; i++) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">float</span> a = a_min + ((<span class="type">float</span>)i / (<span class="type">float</span>)num_segments) * (a_max - a_min);</span><br><span class="line">            window-&gt;DrawList-&gt;<span class="built_in">PathLineTo</span>(<span class="built_in">ImVec2</span>(centre.x + <span class="built_in">ImCos</span>(a+g.Time*<span class="number">8</span>) * radius,</span><br><span class="line">                                                centre.y + <span class="built_in">ImSin</span>(a+g.Time*<span class="number">8</span>) * radius));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">PathStroke</span>(color, <span class="literal">false</span>, thickness);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2号">2号</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cubic_bezier.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;imgui.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;imgui_internal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> gfx::CubicBezier <span class="title">fast_out_slow_in</span><span class="params">(<span class="number">0.4</span>, <span class="number">0.0</span>, <span class="number">0.2</span>, <span class="number">1.0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">float</span> <span class="title">bezier</span><span class="params">(<span class="type">float</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fast_out_slow_in.<span class="built_in">Solve</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> ImGui &#123;</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span></span></span><br><span class="line"><span class="function">    <span class="type">static</span> <span class="keyword">auto</span> <span class="title">lerp</span><span class="params">(<span class="type">float</span> x0, <span class="type">float</span> x1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [=](<span class="type">float</span> t)&#123;</span><br><span class="line">            <span class="built_in">return</span> (<span class="number">1</span>-t) * x0 + t * x1;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span></span></span><br><span class="line"><span class="function">    <span class="type">static</span> <span class="type">float</span> <span class="title">lerp</span><span class="params">(<span class="type">float</span> x0, <span class="type">float</span> x1, <span class="type">float</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">lerp</span>(x0, x1)(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">auto</span> <span class="title">interval</span><span class="params">(<span class="type">float</span> T0, <span class="type">float</span> T1, std::function&lt;<span class="type">float</span>(<span class="type">float</span>)&gt; tween = lerp(<span class="number">0.0</span>, <span class="number">1.0</span>))</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [=](<span class="type">float</span> t)&#123;</span><br><span class="line">            <span class="keyword">return</span> t &lt; T0 ? <span class="number">0.0f</span> : t &gt; T1 ? <span class="number">1.0f</span> : <span class="built_in">tween</span>((t-T0) / (T1-T0));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="type">int</span> T&gt;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">sawtooth</span><span class="params">(<span class="type">float</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">ImFmod</span>(((<span class="type">float</span>)T)*t, <span class="number">1.0f</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Spinner</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* label, <span class="type">float</span> radius, <span class="type">int</span> thickness, <span class="type">const</span> ImU32&amp; color)</span> </span>&#123;</span><br><span class="line">        ImGuiWindow* window = <span class="built_in">GetCurrentWindow</span>();</span><br><span class="line">        <span class="keyword">if</span> (window-&gt;SkipItems)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        ImGuiContext&amp; g = *GImGui;</span><br><span class="line">        <span class="type">const</span> ImGuiStyle&amp; style = g.Style;</span><br><span class="line">        <span class="type">const</span> ImGuiID id = window-&gt;<span class="built_in">GetID</span>(label);</span><br><span class="line"></span><br><span class="line">        ImVec2 pos = window-&gt;DC.CursorPos;</span><br><span class="line">        <span class="function">ImVec2 <span class="title">size</span><span class="params">((radius )*<span class="number">2</span>, (radius + style.FramePadding.y)*<span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">const</span> ImRect <span class="title">bb</span><span class="params">(pos, ImVec2(pos.x + size.x, pos.y + size.y))</span></span>;</span><br><span class="line">        <span class="built_in">ItemSize</span>(bb, style.FramePadding.y);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">ItemAdd</span>(bb, id))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Render</span></span><br><span class="line">        <span class="type">const</span> ImVec2 center = <span class="built_in">ImVec2</span>(pos.x+radius, pos.y+radius+thickness+style.FramePadding.y);</span><br><span class="line"></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> start_angle = -IM_PI / <span class="number">2.0f</span>;         <span class="comment">// Start at the top</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> num_detents = <span class="number">5</span>;                       <span class="comment">// how many rotations we want before a repeat</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> skip_detents = <span class="number">3</span>;                      <span class="comment">// how many steps we skip each rotation</span></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> period = <span class="number">5.0f</span>;                       <span class="comment">// in seconds</span></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> t = <span class="built_in">ImFmod</span>(g.Time, period) / period; <span class="comment">// map period into [0, 1]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Tweening functions for each part of the spinner</span></span><br><span class="line">        <span class="keyword">auto</span> stroke_head_tween = [](<span class="type">float</span> t)&#123;</span><br><span class="line">            t = <span class="built_in">sawtooth</span>&lt;num_detents&gt;(t);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">interval</span>(<span class="number">0.0</span>, <span class="number">0.5</span>, bezier)(t);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> stroke_tail_tween = [](<span class="type">float</span> t)&#123;</span><br><span class="line">            t = <span class="built_in">sawtooth</span>&lt;num_detents&gt;(t);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">interval</span>(<span class="number">0.5</span>, <span class="number">1.0</span>, bezier)(t);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> step_tween = [=](<span class="type">float</span> t)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">floor</span>(<span class="built_in">lerp</span>(<span class="number">0.0</span>, (<span class="type">float</span>)num_detents, t));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> rotation_tween = sawtooth&lt;num_detents&gt;;</span><br><span class="line"></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> head_value = <span class="built_in">stroke_head_tween</span>(t);</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> tail_value = <span class="built_in">stroke_tail_tween</span>(t);</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> step_value = <span class="built_in">step_tween</span>(t);</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> rotation_value = <span class="built_in">rotation_tween</span>(t);</span><br><span class="line"></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> min_arc =  <span class="number">30.0f</span> / <span class="number">360.0f</span> * <span class="number">2.0f</span> * IM_PI;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> max_arc = <span class="number">270.0f</span> / <span class="number">360.0f</span> * <span class="number">2.0f</span> * IM_PI;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> step_offset = skip_detents * <span class="number">2.0f</span> * IM_PI / num_detents;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> rotation_compensation = <span class="built_in">ImFmod</span>(<span class="number">4.0</span>*IM_PI - step_offset - max_arc, <span class="number">2</span>*IM_PI);</span><br><span class="line"></span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> a_min = start_angle + tail_value * max_arc + rotation_value * rotation_compensation - step_value * step_offset;</span><br><span class="line">        <span class="type">const</span> <span class="type">float</span> a_max = a_min + (head_value - tail_value) * max_arc + min_arc;</span><br><span class="line"></span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">PathClear</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> num_segments = <span class="number">24</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num_segments; i++) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">float</span> a = a_min + ((<span class="type">float</span>)i / (<span class="type">float</span>)num_segments) * (a_max - a_min);</span><br><span class="line">            window-&gt;DrawList-&gt;<span class="built_in">PathLineTo</span>(<span class="built_in">ImVec2</span>(center.x + <span class="built_in">ImCos</span>(a) * radius,</span><br><span class="line">                                                center.y + <span class="built_in">ImSin</span>(a) * radius));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        window-&gt;DrawList-&gt;<span class="built_in">PathStroke</span>(color, <span class="literal">false</span>, thickness);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            发布于&nbsp;
            <time datetime="2024-11-15T16:00:00.000Z" itemprop="datePublished">
              2024-11-16
            </time>
          </div>
          
      </section>
    
    
      <section>
        <div id="disqus_thread"></div>
        <script>
          window.disqus_config = function () {
            this.page.url = window.location.toString()
            this.page.identifier = window.location.pathname
          }
          if (typeof DISQUS === 'undefined') {
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');
              s.src = 'https://YunyinBlog.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          } else {
            DISQUS.reset({
                reload: true,
                config: window.disqus_config
            })
          }
        </script>
      </section>
    
</article>

  
</div>

            <footer>
    <div>© 2024 - Yunyin </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>